{% extends "myldapi/layout.html" %}

{% block content %}
<section class="myldapi-section">
    <div class="row">
        <div class="col-12">
            <h1>Alternates View</h1>
            <p class="lead">{{ uri }}</p>
        </div>
    </div>
    <div class="row">
        {% set am, v = find_prop(attr_map, 'register') %}
        {% set register = v.value %}
        <div class="col-12">
            <table class="table alternates">
                <tbody>
                    <tr>
                        <th>View</th>
                        <th>Key</th>
                        <th>Formats</th>
                        <th>Profile URI</th>
                        <th>Description</th>
                    </tr>
                    {% for view in register.views %}
                    <tr>
                        <td>
                            {{ view.name }}
                            {%if view == register.get_default_view() %}
                            <div>
                                <span class="badge badge-primary">Default</span>
                            </div>
                            {% endif %}
                        </td>
                        <td><a href="?_view={{ view.key }}">{{ view.key }}</a></td>
                        <td style="white-space: nowrap">
                            <ul class="list-unstyled">
                                {% for f in view.formats %}
                                <li>
                                    <a href="?_view={{ view.key }}&_format={{ f.default_media_type() }}" title="{{f.label}}">{{ f.default_media_type() }}</a>
                                    {%if f == view.get_default_format() %}
                                    <span class="badge badge-primary">Default</span>
                                    {% endif %}
                                </li>
                                {% endfor %}
                            </ul>
                        </td>
                        <td style="white-space: nowrap">{{ view.profile_uri }}</td>
                        <td>{{ view.comment }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>

{% endblock %}